import * as vue from '@volar/vue-language-core';
import { SourceMapBase, Mapping } from '@volar/source-map';
import { TextDocument } from 'vscode-languageserver-textdocument';
import { EmbeddedFileMappingData, TeleportMappingData, TeleportSideData } from '@volar/vue-code-gen';
import * as vscode from 'vscode-languageserver-protocol';
import type * as ts2 from '@volar/typescript-language-service';
export declare type VueDocuments = ReturnType<typeof parseVueDocuments>;
export declare type VueDocument = ReturnType<typeof parseVueDocument>;
export interface ITemplateScriptData {
    components: string[];
    componentItems: vscode.CompletionItem[];
}
export declare class SourceMap<Data = undefined> extends SourceMapBase<Data> {
    sourceDocument: TextDocument;
    mappedDocument: TextDocument;
    _mappings?: Mapping<Data>[] | undefined;
    constructor(sourceDocument: TextDocument, mappedDocument: TextDocument, _mappings?: Mapping<Data>[] | undefined);
    getSourceRange<T extends number | vscode.Position>(start: T, end?: T, filter?: (data: Data) => boolean): [{
        start: T;
        end: T;
    }, Data] | undefined;
    getMappedRange<T extends number | vscode.Position>(start: T, end?: T, filter?: (data: Data) => boolean): [{
        start: T;
        end: T;
    }, Data] | undefined;
    getSourceRanges<T extends number | vscode.Position>(start: T, end?: T, filter?: (data: Data) => boolean): Generator<[{
        start: T;
        end: T;
    }, Data], void, unknown>;
    getMappedRanges<T extends number | vscode.Position>(start: T, end?: T, filter?: (data: Data) => boolean): Generator<[{
        start: T;
        end: T;
    }, Data], void, unknown>;
    protected getRanges<T extends number | vscode.Position>(start: T, end: T, sourceToTarget: boolean, filter?: (data: Data) => boolean): Generator<[{
        start: T;
        end: T;
    }, Data], void, unknown>;
}
export declare class EmbeddedDocumentSourceMap extends SourceMap<EmbeddedFileMappingData> {
    embeddedFile: vue.EmbeddedFile;
    sourceDocument: TextDocument;
    mappedDocument: TextDocument;
    constructor(embeddedFile: vue.EmbeddedFile, sourceDocument: TextDocument, mappedDocument: TextDocument, _sourceMap: vue.EmbeddedFileSourceMap);
}
export declare class TeleportSourceMap extends SourceMap<TeleportMappingData> {
    embeddedFile: vue.EmbeddedFile;
    document: TextDocument;
    constructor(embeddedFile: vue.EmbeddedFile, document: TextDocument, teleport: vue.Teleport);
    findTeleports(start: vscode.Position, end?: vscode.Position, filter?: (data: TeleportSideData) => boolean): Generator<readonly [{
        start: vscode.Position;
        end: vscode.Position;
    }, TeleportSideData], void, unknown>;
}
export declare function parseVueDocuments(vueLsCtx: vue.LanguageContext, tsLs: ts2.LanguageService): {
    getAll: () => {
        uri: string;
        file: vue.SourceFile;
        embeddedDocumentsMap: {
            get: (source: vue.EmbeddedFile) => TextDocument;
        };
        sourceMapsMap: {
            get: (source: vue.Embedded) => EmbeddedDocumentSourceMap;
        };
        getTemplateData: () => Promise<ITemplateScriptData>;
        getSourceMaps: () => EmbeddedDocumentSourceMap[];
        getTeleports: () => TeleportSourceMap[];
        getDocument: () => TextDocument;
        getTemplateTagsAndAttrs: () => {
            tags: Map<string, number[]>;
            attrs: Set<string>;
        };
    }[];
    get: (uri: string) => {
        uri: string;
        file: vue.SourceFile;
        embeddedDocumentsMap: {
            get: (source: vue.EmbeddedFile) => TextDocument;
        };
        sourceMapsMap: {
            get: (source: vue.Embedded) => EmbeddedDocumentSourceMap;
        };
        getTemplateData: () => Promise<ITemplateScriptData>;
        getSourceMaps: () => EmbeddedDocumentSourceMap[];
        getTeleports: () => TeleportSourceMap[];
        getDocument: () => TextDocument;
        getTemplateTagsAndAttrs: () => {
            tags: Map<string, number[]>;
            attrs: Set<string>;
        };
    } | undefined;
    fromEmbeddedDocument: (document: TextDocument) => {
        uri: string;
        file: vue.SourceFile;
        embeddedDocumentsMap: {
            get: (source: vue.EmbeddedFile) => TextDocument;
        };
        sourceMapsMap: {
            get: (source: vue.Embedded) => EmbeddedDocumentSourceMap;
        };
        getTemplateData: () => Promise<ITemplateScriptData>;
        getSourceMaps: () => EmbeddedDocumentSourceMap[];
        getTeleports: () => TeleportSourceMap[];
        getDocument: () => TextDocument;
        getTemplateTagsAndAttrs: () => {
            tags: Map<string, number[]>;
            attrs: Set<string>;
        };
    } | undefined;
    sourceMapFromEmbeddedDocumentUri: (uri: string) => EmbeddedDocumentSourceMap | undefined;
    teleportfromEmbeddedDocumentUri: (uri: string) => TeleportSourceMap | undefined;
    fromEmbeddedLocation: (uri: string, start: vscode.Position, end?: vscode.Position, filter?: ((data: EmbeddedFileMappingData) => boolean) | undefined, sourceMapFilter?: ((sourceMap: vue.EmbeddedFileSourceMap) => boolean) | undefined) => Generator<{
        uri: string;
        range: {
            start: vscode.Position;
            end: vscode.Position;
        };
        sourceMap: EmbeddedDocumentSourceMap;
        data: EmbeddedFileMappingData;
    } | {
        uri: string;
        range: {
            start: vscode.Position;
            end: vscode.Position;
        };
        sourceMap?: undefined;
        data?: undefined;
    }, void, unknown>;
};
export declare function parseVueDocument(vueFile: vue.SourceFile, tsLs: ts2.LanguageService | undefined): {
    uri: string;
    file: vue.SourceFile;
    embeddedDocumentsMap: {
        get: (source: vue.EmbeddedFile) => TextDocument;
    };
    sourceMapsMap: {
        get: (source: vue.Embedded) => EmbeddedDocumentSourceMap;
    };
    getTemplateData: () => Promise<ITemplateScriptData>;
    getSourceMaps: () => EmbeddedDocumentSourceMap[];
    getTeleports: () => TeleportSourceMap[];
    getDocument: () => TextDocument;
    getTemplateTagsAndAttrs: () => {
        tags: Map<string, number[]>;
        attrs: Set<string>;
    };
};
export declare function useCacheMap<T extends object, K>(parse: (t: T) => K): {
    get: (source: T) => K;
};
